"undefined"==typeof pdoPage&&(pdoPage={callbacks:{},keys:{},configs:{}}),pdoPage.Reached=!1,pdoPage.initialize=function(e){if(void 0==pdoPage.keys[e.pageVarKey]){var a=e.pageVarKey,o=pdoPage.Hash.get(),t=void 0==o[a]?1:o[a];pdoPage.keys[a]=Number(t),pdoPage.configs[a]=e}var i=this;switch(e.mode){case"default":$(document).on("click",e.link,function(a){a.preventDefault();var o=$(this).prop("href"),t=e.pageVarKey,n=o.match(new RegExp(t+"[=|/](\\d+)")),r=n?n[1]:1;pdoPage.keys[t]!=r&&(e.history&&(1==r?pdoPage.Hash.remove(t):pdoPage.Hash.add(t,r)),i.loadPage(o,e))}),e.history&&($(window).on("popstate",function(a){a.originalEvent.state&&a.originalEvent.state.pdoPage&&i.loadPage(a.originalEvent.state.pdoPage,e)}),history.replaceState({pdoPage:window.location.href},""));break;case"scroll":case"button":if(e.history){if("undefined"==typeof jQuery().sticky)return void $.getScript(e.assetsUrl+"js/lib/jquery.sticky.min.js",function(){pdoPage.initialize(e)});pdoPage.stickyPagination(e)}else $(e.pagination).hide();var n=e.pageVarKey;if("button"==e.mode){$(e.rows).after(e.moreTpl);var r=!1;$(e.link).each(function(){var e=$(this).prop("href"),a=e.match(new RegExp(n+"[=|/](\\d+)")),o=a?a[1]:1;if(o>pdoPage.keys[n])return r=!0,!1}),r||$(e.more).hide(),$(document).on("click",e.more,function(a){a.preventDefault(),pdoPage.addPage(e)})}else{var p=$(e.wrapper),d=$(window);d.on("scroll",function(){!pdoPage.Reached&&d.scrollTop()>p.height()-d.height()&&(pdoPage.Reached=!0,pdoPage.addPage(e))})}}},pdoPage.addPage=function(e){var a=e.pageVarKey,o=pdoPage.keys[a]||1;$(e.link).each(function(){var t=$(this).prop("href"),i=t.match(new RegExp(a+"[=|/](\\d+)")),n=i?Number(i[1]):1;if(n>o)return e.history&&(1==n?pdoPage.Hash.remove(a):pdoPage.Hash.add(a,n)),pdoPage.loadPage(t,e,"append"),!1})},pdoPage.loadPage=function(e,a,o){var t=$(a.wrapper),i=$(a.rows),n=$(a.pagination),r=a.pageVarKey,p=e.match(new RegExp(r+"[=|/](\\d+)")),d=p?Number(p[1]):1;if(o||(o="replace"),pdoPage.keys[r]!=d){pdoPage.callbacks.before&&"function"==typeof pdoPage.callbacks.before?pdoPage.callbacks.before.apply(this,[a]):("scroll"!=a.mode&&t.css({opacity:.3}),t.addClass("loading"));var s=pdoPage.Hash.get();for(var c in s)s.hasOwnProperty(c)&&pdoPage.keys[c]&&c!=r&&delete s[c];s[r]=pdoPage.keys[r]=d,s.pageId=a.pageId,s.hash=a.hash,$.post(a.connectorUrl,s,function(e){e&&e.total&&(t.find(n).html(e.pagination),"append"==o?(t.find(i).append(e.output),"button"==a.mode?e.pages==e.page?$(a.more).hide():$(a.more).show():"scroll"==a.mode&&(pdoPage.Reached=!1)):t.find(i).html(e.output),pdoPage.callbacks.after&&"function"==typeof pdoPage.callbacks.after?pdoPage.callbacks.after.apply(this,[a,e]):(t.removeClass("loading"),"scroll"!=a.mode&&(t.css({opacity:1}),"default"==a.mode&&$("html, body").animate({scrollTop:t.position().top-50||0},0))),pdoPage.updateTitle(a,e),$(document).trigger("pdopage_load",[a,e]))},"json")}},pdoPage.stickyPagination=function(e){var a=$(e.pagination);a.is(":visible")&&(a.sticky({wrapperClassName:"sticky-pagination",getWidthFrom:e.wrapper,responsiveWidth:!0,topSpacing:2}),$(e.wrapper).trigger("scroll"))},pdoPage.updateTitle=function(e,a){if("undefined"!=typeof pdoTitle){for(var o=$("title"),t=pdoTitle.separator||" / ",i=pdoTitle.tpl,n=[],r=o.text().split(t),p=new RegExp("^"+i.split(" ")[0]+" "),d=0;d<r.length;d++)1===d&&a.page&&a.page>1&&n.push(i.replace("{page}",a.page).replace("{pageCount}",a.pages)),r[d].match(p)||n.push(r[d]);o.text(n.join(t))}},pdoPage.Hash={get:function(){var e,a,o,t={};if(this.oldbrowser())o=decodeURIComponent(window.location.hash.substr(1)).replace("+"," "),a="/";else{var i=window.location.href.indexOf("?");o=i!=-1?decodeURIComponent(window.location.href.substr(i+1)).replace("+"," "):"",a="&"}if(0==o.length)return t;o=o.split(a);var n,r;for(var p in o)o.hasOwnProperty(p)&&(e=o[p].split("="),"undefined"==typeof e[1]?t.anchor=e[0]:(n=e[0].match(/\[(.*?|)\]$/),n?(r=e[0].replace(n[0],""),t.hasOwnProperty(r)||(""==n[1]?t[r]=[]:t[r]={}),t[r]instanceof Array?t[r].push(e[1]):t[r][n[1]]=e[1]):t[e[0]]=e[1]));return t},set:function(e){var a="";for(var o in e)if(e.hasOwnProperty(o))if("object"==typeof e[o])for(var t in e[o])e[o].hasOwnProperty(t)&&(a+=e[o]instanceof Array?"&"+o+"[]="+e[o][t]:"&"+o+"["+t+"]="+e[o][t]);else a+="&"+o+"="+e[o];this.oldbrowser()?window.location.hash=a.substr(1):(0!=a.length&&(a="?"+a.substr(1)),window.history.pushState({pdoPage:document.location.pathname+a},"",document.location.pathname+a))},add:function(e,a){var o=this.get();o[e]=a,this.set(o)},remove:function(e){var a=this.get();delete a[e],this.set(a)},clear:function(){this.set({})},oldbrowser:function(){return!(window.history&&history.pushState)}},"undefined"==typeof jQuery&&console.log("You must load jQuery for using ajax mode in pdoPage.");